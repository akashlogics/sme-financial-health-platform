{
  "query": "CREATE TABLE `auditLogs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int,\n\t`businessId` int,\n\t`actionType` varchar(100) NOT NULL,\n\t`resourceType` varchar(100) NOT NULL,\n\t`resourceId` int,\n\t`description` text,\n\t`status` enum('success','failure','partial') NOT NULL,\n\t`ipAddress` varchar(45),\n\t`userAgent` text,\n\t`changes` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `auditLogs_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `bankingConnections` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`businessId` int NOT NULL,\n\t`bankName` varchar(100) NOT NULL,\n\t`accountNumber` varchar(50) NOT NULL,\n\t`accountType` varchar(50),\n\t`apiType` varchar(50) NOT NULL,\n\t`encryptedCredentials` text NOT NULL,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`lastSyncDate` timestamp,\n\t`syncStatus` enum('pending','syncing','success','failed') NOT NULL DEFAULT 'pending',\n\t`syncErrorMessage` text,\n\t`connectedAt` timestamp NOT NULL DEFAULT (now()),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `bankingConnections_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `businesses` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`ownerId` int NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`industry` enum('manufacturing','retail','services','agriculture','logistics','ecommerce','healthcare','education','hospitality','other') NOT NULL,\n\t`registrationNumber` varchar(100),\n\t`gstNumber` varchar(15),\n\t`panNumber` varchar(10),\n\t`financialYearStart` int NOT NULL DEFAULT 4,\n\t`businessType` enum('sole_proprietor','partnership','pvt_ltd','llp','other') NOT NULL,\n\t`employeeCount` int,\n\t`annualTurnover` decimal(15,2),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `businesses_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `costOptimization` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`businessId` int NOT NULL,\n\t`analysisId` int NOT NULL,\n\t`category` varchar(100) NOT NULL,\n\t`currentCost` decimal(15,2) NOT NULL,\n\t`recommendedCost` decimal(15,2) NOT NULL,\n\t`savingsPotential` decimal(15,2) NOT NULL,\n\t`savingsPercentage` decimal(8,2) NOT NULL,\n\t`recommendation` text NOT NULL,\n\t`implementationDifficulty` enum('easy','medium','hard') NOT NULL,\n\t`timelineMonths` int,\n\t`priority` enum('high','medium','low') NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `costOptimization_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `financialAnalysis` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`businessId` int NOT NULL,\n\t`financialDataId` int NOT NULL,\n\t`analysisDate` timestamp NOT NULL DEFAULT (now()),\n\t`expirationDate` timestamp,\n\t`creditScore` decimal(5,2),\n\t`creditTier` enum('excellent','good','fair','poor','very_poor'),\n\t`riskTier` enum('very_low','low','medium','high','very_high'),\n\t`currentRatio` decimal(8,2),\n\t`quickRatio` decimal(8,2),\n\t`debtToEquityRatio` decimal(8,2),\n\t`profitMargin` decimal(8,2),\n\t`returnOnAssets` decimal(8,2),\n\t`returnOnEquity` decimal(8,2),\n\t`assetTurnover` decimal(8,2),\n\t`debtServiceCoverageRatio` decimal(8,2),\n\t`analysisResults` json,\n\t`aiInsights` text,\n\t`riskFactors` json,\n\t`opportunities` json,\n\t`recommendations` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `financialAnalysis_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `financialData` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`businessId` int NOT NULL,\n\t`dataType` enum('balance_sheet','profit_loss','cash_flow','bank_statement','gst_return','other') NOT NULL,\n\t`period` varchar(50) NOT NULL,\n\t`periodStart` timestamp NOT NULL,\n\t`periodEnd` timestamp NOT NULL,\n\t`fileName` varchar(255) NOT NULL,\n\t`fileType` varchar(20) NOT NULL,\n\t`fileSize` int NOT NULL,\n\t`s3Key` varchar(500) NOT NULL,\n\t`rawData` json,\n\t`validationStatus` enum('pending','valid','invalid','partial') NOT NULL DEFAULT 'pending',\n\t`validationErrors` json,\n\t`source` enum('manual_upload','banking_api','gst_api','accounting_software') NOT NULL DEFAULT 'manual_upload',\n\t`uploadedBy` int NOT NULL,\n\t`uploadedAt` timestamp NOT NULL DEFAULT (now()),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `financialData_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `financialReports` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`businessId` int NOT NULL,\n\t`analysisId` int,\n\t`reportTitle` varchar(255) NOT NULL,\n\t`reportType` enum('investor_ready','bank_loan','tax_compliance','custom') NOT NULL,\n\t`reportFormat` enum('pdf','html','excel') NOT NULL DEFAULT 'pdf',\n\t`language` enum('en','hi') NOT NULL DEFAULT 'en',\n\t`s3Key` varchar(500),\n\t`reportContent` json,\n\t`generatedBy` int NOT NULL,\n\t`generatedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `financialReports_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `gstRecords` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`businessId` int NOT NULL,\n\t`gstNumber` varchar(15) NOT NULL,\n\t`filingPeriod` varchar(20) NOT NULL,\n\t`filingDate` timestamp,\n\t`filingStatus` enum('not_filed','filed','amended','cancelled') NOT NULL,\n\t`complianceScore` decimal(5,2),\n\t`totalTaxLiability` decimal(15,2),\n\t`totalTaxPaid` decimal(15,2),\n\t`taxDue` decimal(15,2),\n\t`deductionOpportunities` json,\n\t`filingGaps` json,\n\t`lastVerifiedDate` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `gstRecords_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `industryBenchmarks` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`industry` varchar(100) NOT NULL,\n\t`metricName` varchar(100) NOT NULL,\n\t`averageValue` decimal(15,2),\n\t`medianValue` decimal(15,2),\n\t`percentile25` decimal(15,2),\n\t`percentile75` decimal(15,2),\n\t`percentile90` decimal(15,2),\n\t`dataSource` varchar(255),\n\t`lastUpdated` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `industryBenchmarks_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `systemConfig` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`configKey` varchar(100) NOT NULL,\n\t`configValue` text NOT NULL,\n\t`configType` enum('string','number','boolean','json') NOT NULL DEFAULT 'string',\n\t`description` text,\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `systemConfig_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `systemConfig_configKey_unique` UNIQUE(`configKey`)\n);\nALTER TABLE `users` MODIFY COLUMN `role` enum('user','admin','advisor') NOT NULL DEFAULT 'user';\nALTER TABLE `users` ADD `languagePreference` enum('en','hi') DEFAULT 'en' NOT NULL;\nALTER TABLE `users` ADD `timezone` varchar(50) DEFAULT 'UTC' NOT NULL;\nCREATE INDEX `userId_idx` ON `auditLogs` (`userId`);\nCREATE INDEX `businessId_idx` ON `auditLogs` (`businessId`);\nCREATE INDEX `actionType_idx` ON `auditLogs` (`actionType`);\nCREATE INDEX `createdAt_idx` ON `auditLogs` (`createdAt`);\nCREATE INDEX `businessId_idx` ON `bankingConnections` (`businessId`);\nCREATE INDEX `bankName_idx` ON `bankingConnections` (`bankName`);\nCREATE INDEX `ownerId_idx` ON `businesses` (`ownerId`);\nCREATE INDEX `industry_idx` ON `businesses` (`industry`);\nCREATE INDEX `businessId_idx` ON `costOptimization` (`businessId`);\nCREATE INDEX `category_idx` ON `costOptimization` (`category`);\nCREATE INDEX `businessId_idx` ON `financialAnalysis` (`businessId`);\nCREATE INDEX `creditScore_idx` ON `financialAnalysis` (`creditScore`);\nCREATE INDEX `creditTier_idx` ON `financialAnalysis` (`creditTier`);\nCREATE INDEX `businessId_idx` ON `financialData` (`businessId`);\nCREATE INDEX `dataType_idx` ON `financialData` (`dataType`);\nCREATE INDEX `period_idx` ON `financialData` (`period`);\nCREATE INDEX `businessId_idx` ON `financialReports` (`businessId`);\nCREATE INDEX `reportType_idx` ON `financialReports` (`reportType`);\nCREATE INDEX `businessId_idx` ON `gstRecords` (`businessId`);\nCREATE INDEX `gstNumber_idx` ON `gstRecords` (`gstNumber`);\nCREATE INDEX `filingPeriod_idx` ON `gstRecords` (`filingPeriod`);\nCREATE INDEX `industry_idx` ON `industryBenchmarks` (`industry`);\nCREATE INDEX `metricName_idx` ON `industryBenchmarks` (`metricName`);\nCREATE INDEX `configKey_idx` ON `systemConfig` (`configKey`);\nCREATE INDEX `openId_idx` ON `users` (`openId`);\nCREATE INDEX `role_idx` ON `users` (`role`);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2LVTGJA2hvyFr2x.5b8e5d4b5ef0 --database j6P6mz5hdM9poPVthVhU9q --execute CREATE TABLE `auditLogs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int,\n\t`businessId` int,\n\t`actionType` varchar(100) NOT NULL,\n\t`resourceType` varchar(100) NOT NULL,\n\t`resourceId` int,\n\t`description` text,\n\t`status` enum('success','failure','partial') NOT NULL,\n\t`ipAddress` varchar(45),\n\t`userAgent` text,\n\t`changes` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `auditLogs_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `bankingConnections` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`businessId` int NOT NULL,\n\t`bankName` varchar(100) NOT NULL,\n\t`accountNumber` varchar(50) NOT NULL,\n\t`accountType` varchar(50),\n\t`apiType` varchar(50) NOT NULL,\n\t`encryptedCredentials` text NOT NULL,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`lastSyncDate` timestamp,\n\t`syncStatus` enum('pending','syncing','success','failed') NOT NULL DEFAULT 'pending',\n\t`syncErrorMessage` text,\n\t`connectedAt` timestamp NOT NULL DEFAULT (now()),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `bankingConnections_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `businesses` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`ownerId` int NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`industry` enum('manufacturing','retail','services','agriculture','logistics','ecommerce','healthcare','education','hospitality','other') NOT NULL,\n\t`registrationNumber` varchar(100),\n\t`gstNumber` varchar(15),\n\t`panNumber` varchar(10),\n\t`financialYearStart` int NOT NULL DEFAULT 4,\n\t`businessType` enum('sole_proprietor','partnership','pvt_ltd','llp','other') NOT NULL,\n\t`employeeCount` int,\n\t`annualTurnover` decimal(15,2),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `businesses_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `costOptimization` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`businessId` int NOT NULL,\n\t`analysisId` int NOT NULL,\n\t`category` varchar(100) NOT NULL,\n\t`currentCost` decimal(15,2) NOT NULL,\n\t`recommendedCost` decimal(15,2) NOT NULL,\n\t`savingsPotential` decimal(15,2) NOT NULL,\n\t`savingsPercentage` decimal(8,2) NOT NULL,\n\t`recommendation` text NOT NULL,\n\t`implementationDifficulty` enum('easy','medium','hard') NOT NULL,\n\t`timelineMonths` int,\n\t`priority` enum('high','medium','low') NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `costOptimization_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `financialAnalysis` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`businessId` int NOT NULL,\n\t`financialDataId` int NOT NULL,\n\t`analysisDate` timestamp NOT NULL DEFAULT (now()),\n\t`expirationDate` timestamp,\n\t`creditScore` decimal(5,2),\n\t`creditTier` enum('excellent','good','fair','poor','very_poor'),\n\t`riskTier` enum('very_low','low','medium','high','very_high'),\n\t`currentRatio` decimal(8,2),\n\t`quickRatio` decimal(8,2),\n\t`debtToEquityRatio` decimal(8,2),\n\t`profitMargin` decimal(8,2),\n\t`returnOnAssets` decimal(8,2),\n\t`returnOnEquity` decimal(8,2),\n\t`assetTurnover` decimal(8,2),\n\t`debtServiceCoverageRatio` decimal(8,2),\n\t`analysisResults` json,\n\t`aiInsights` text,\n\t`riskFactors` json,\n\t`opportunities` json,\n\t`recommendations` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `financialAnalysis_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `financialData` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`businessId` int NOT NULL,\n\t`dataType` enum('balance_sheet','profit_loss','cash_flow','bank_statement','gst_return','other') NOT NULL,\n\t`period` varchar(50) NOT NULL,\n\t`periodStart` timestamp NOT NULL,\n\t`periodEnd` timestamp NOT NULL,\n\t`fileName` varchar(255) NOT NULL,\n\t`fileType` varchar(20) NOT NULL,\n\t`fileSize` int NOT NULL,\n\t`s3Key` varchar(500) NOT NULL,\n\t`rawData` json,\n\t`validationStatus` enum('pending','valid','invalid','partial') NOT NULL DEFAULT 'pending',\n\t`validationErrors` json,\n\t`source` enum('manual_upload','banking_api','gst_api','accounting_software') NOT NULL DEFAULT 'manual_upload',\n\t`uploadedBy` int NOT NULL,\n\t`uploadedAt` timestamp NOT NULL DEFAULT (now()),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `financialData_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `financialReports` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`businessId` int NOT NULL,\n\t`analysisId` int,\n\t`reportTitle` varchar(255) NOT NULL,\n\t`reportType` enum('investor_ready','bank_loan','tax_compliance','custom') NOT NULL,\n\t`reportFormat` enum('pdf','html','excel') NOT NULL DEFAULT 'pdf',\n\t`language` enum('en','hi') NOT NULL DEFAULT 'en',\n\t`s3Key` varchar(500),\n\t`reportContent` json,\n\t`generatedBy` int NOT NULL,\n\t`generatedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `financialReports_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `gstRecords` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`businessId` int NOT NULL,\n\t`gstNumber` varchar(15) NOT NULL,\n\t`filingPeriod` varchar(20) NOT NULL,\n\t`filingDate` timestamp,\n\t`filingStatus` enum('not_filed','filed','amended','cancelled') NOT NULL,\n\t`complianceScore` decimal(5,2),\n\t`totalTaxLiability` decimal(15,2),\n\t`totalTaxPaid` decimal(15,2),\n\t`taxDue` decimal(15,2),\n\t`deductionOpportunities` json,\n\t`filingGaps` json,\n\t`lastVerifiedDate` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `gstRecords_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `industryBenchmarks` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`industry` varchar(100) NOT NULL,\n\t`metricName` varchar(100) NOT NULL,\n\t`averageValue` decimal(15,2),\n\t`medianValue` decimal(15,2),\n\t`percentile25` decimal(15,2),\n\t`percentile75` decimal(15,2),\n\t`percentile90` decimal(15,2),\n\t`dataSource` varchar(255),\n\t`lastUpdated` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `industryBenchmarks_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `systemConfig` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`configKey` varchar(100) NOT NULL,\n\t`configValue` text NOT NULL,\n\t`configType` enum('string','number','boolean','json') NOT NULL DEFAULT 'string',\n\t`description` text,\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `systemConfig_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `systemConfig_configKey_unique` UNIQUE(`configKey`)\n);\nALTER TABLE `users` MODIFY COLUMN `role` enum('user','admin','advisor') NOT NULL DEFAULT 'user';\nALTER TABLE `users` ADD `languagePreference` enum('en','hi') DEFAULT 'en' NOT NULL;\nALTER TABLE `users` ADD `timezone` varchar(50) DEFAULT 'UTC' NOT NULL;\nCREATE INDEX `userId_idx` ON `auditLogs` (`userId`);\nCREATE INDEX `businessId_idx` ON `auditLogs` (`businessId`);\nCREATE INDEX `actionType_idx` ON `auditLogs` (`actionType`);\nCREATE INDEX `createdAt_idx` ON `auditLogs` (`createdAt`);\nCREATE INDEX `businessId_idx` ON `bankingConnections` (`businessId`);\nCREATE INDEX `bankName_idx` ON `bankingConnections` (`bankName`);\nCREATE INDEX `ownerId_idx` ON `businesses` (`ownerId`);\nCREATE INDEX `industry_idx` ON `businesses` (`industry`);\nCREATE INDEX `businessId_idx` ON `costOptimization` (`businessId`);\nCREATE INDEX `category_idx` ON `costOptimization` (`category`);\nCREATE INDEX `businessId_idx` ON `financialAnalysis` (`businessId`);\nCREATE INDEX `creditScore_idx` ON `financialAnalysis` (`creditScore`);\nCREATE INDEX `creditTier_idx` ON `financialAnalysis` (`creditTier`);\nCREATE INDEX `businessId_idx` ON `financialData` (`businessId`);\nCREATE INDEX `dataType_idx` ON `financialData` (`dataType`);\nCREATE INDEX `period_idx` ON `financialData` (`period`);\nCREATE INDEX `businessId_idx` ON `financialReports` (`businessId`);\nCREATE INDEX `reportType_idx` ON `financialReports` (`reportType`);\nCREATE INDEX `businessId_idx` ON `gstRecords` (`businessId`);\nCREATE INDEX `gstNumber_idx` ON `gstRecords` (`gstNumber`);\nCREATE INDEX `filingPeriod_idx` ON `gstRecords` (`filingPeriod`);\nCREATE INDEX `industry_idx` ON `industryBenchmarks` (`industry`);\nCREATE INDEX `metricName_idx` ON `industryBenchmarks` (`metricName`);\nCREATE INDEX `configKey_idx` ON `systemConfig` (`configKey`);\nCREATE INDEX `openId_idx` ON `users` (`openId`);\nCREATE INDEX `role_idx` ON `users` (`role`);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 27363
}